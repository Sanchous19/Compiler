# Компилятор

### Теория

Определим пару важных понятий для данного проекта:

Компиляция — сборка программы, включающая трансляцию всех модулей программы, написанных на одном или нескольких исходных языках программирования высокого уровня и/или языке ассемблера, в эквивалентные программные модули на низкоуровневом языке, близком машинному коду (абсолютный код, объектный модуль, иногда на язык ассемблера) или непосредственно на машинном языке или ином двоичнокодовом низкоуровневом командном языке и последующую сборку исполняемой машинной программы.

Компилятор — программа или техническое средство, выполняющее компиляцию программы.

Трансляция программы как неотъемлемая составляющая компиляции включает в себя:
1. Лексический анализ. На этом этапе последовательность символов исходного файла преобразуется в последовательность лексем.
2. Синтаксический (грамматический) анализ. Последовательность лексем преобразуется в дерево разбора.
3. Семантический анализ. Дерево разбора обрабатывается с целью установления его семантики (смысла) — например, привязка идентификаторов к их декларациям, типам, проверка совместимости, определение типов выражений и т. д. Результат обычно называется «промежуточным представлением/кодом», и может быть дополненным деревом разбора, новым деревом, абстрактным набором команд или чем-то ещё, удобным для дальнейшей обработки.
4. Оптимизация. Выполняется удаление излишних конструкций и упрощение кода с сохранением его смысла. Оптимизация может быть на разных уровнях и этапах — например, над промежуточным кодом или над конечным машинным кодом.
5. Генерация кода. Из промежуточного представления порождается код на целевом машинно-ориентированном языке.

Эзотерический язык программирования — язык программирования, разработанный для исследования границ возможностей разработки языков программирования, для доказательства потенциально возможной реализации некой идеи (так называемое «доказательство концепции»), в качестве произведения программного искусства или в качестве шутки (компьютерного юмора).

Данный компилятор предназначен для компиляции языка программирования Brainfuck. Brainfuck — один из известнейших эзотерических языков программирования, придуман Урбаном Мюллером в 1993 году, известен своим минимализмом. Название языка можно перевести на русский как вынос мозга. Язык имеет восемь команд, каждая из которых записывается одним символом. Исходный код программы на Brainfuck представляет собой последовательность этих символов без какого-либо дополнительного синтаксиса. Машина, которой управляют команды Brainfuck, состоит из упорядоченного набора ячеек и указателя текущей ячейки, напоминая ленту и головку машины Тьюринга. Кроме того, подразумевается устройство общения с внешним миром через поток ввода и поток вывода.

Вот сами команды:

| Команда Brainfuck |  Эквивалент на Си    |  Описание команды                                                                                                                        |
|:-----------------:|:---------------------|:-----------------------------------------------------------------------------------------------------------------------------------------|
|        `>`        | `i++;`               | перейти к следующей ячейке                                                                                                               |
|        `<`        | `i--;`               | перейти к предыдущей ячейке                                                                                                              |
|        `+`        | `arr[i]++;`          | увеличить значение в текущей ячейке на 1                                                                                                 |
|        `-`        | `arr[i]--;`          | уменьшить значение в текущей ячейке на 1                                                                                                 |
|        `.`        | `putchar(arr[i]);`   | напечатать значение из текущей ячейки                                                                                                    |
|        `,`        | `arr[i] = getchar();`| ввести извне значение и сохранить в текущей ячейке                                                                                       |
|        `[`        | `while(arr[i]){`     | если значение текущей ячейки ноль, перейти вперёд по тексту программы на ячейку, следующую за соответствующей `]` (с учётом вложенности) |
|        `]`        | `}`                  | если значение текущей ячейки не нуль, перейти назад по тексту программы на символ `[` (с учётом вложенности)                             |

Пример программы на языке Brainfuck, печатающая «Hello World!»:
```
++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++
 .>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.
 ------.--------.>+.>.
 ```
 
 ### Программа
 
 Программа состоит из следующих сущностей:
 * AstPrinter — предназначен для вывода абстрактного синтаксического дерева.
 * CodeGenerator — предназначен для генерации кода в выходной файл из переданного абстрактного синтаксического дерева.
 * FileHandler — предназначен для удобного использования файлов.
 * LexicalAnalyzer — предназначен для лексического анализа входного файла.
 * Node — узел в абстрактном синтаксическом дереве.
 * Optimizer — предназначен для оптимизации кода на основе переданного абстрактного синтаксического дерева.
 * Parser — предназначен для построения абстрактного синтаксического дерева из кода входного файла.
 * Settings — предназначен для хранения заданных настроек компиляции, переданные через аргументы командной строки.
 
Использование компилятора:

`BrainfuckCompiler.exe [options] file`

file — имя входного файла.

Options:
* --help — отображение помощи по использования компилятора.
* --la — произвести только лексический анализ входного файла.
* --no-opt — скомпилировать файл без оптимизаций.
* --pr-ast — показать абстрактное синтаксическое дерево перед оптимизациями.
* --pr-opt-ast — показать абстрактное синтаксическое дерево после оптимизаций.
* -o <result_file> — задать имя выходного файла (по умолчанию — file.c).
